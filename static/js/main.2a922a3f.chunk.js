(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(40)},24:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),i=a.n(s),c=a(15),o=a(1),u=a.n(o),l=a(4),h=a(5),p=a(6),m=a(8),v=a(7),d=a(9),f=a(2);function g(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="https://api.themoviedb.org/3/".concat(e,"/").concat(t,"?api_key=").concat("61ebd99718473b328b06d99fe53a89df").concat(a);return fetch(n).then(function(e){return e.json()}).then(function(t){return 34===t.status_code?g(e,Math.round(1e4*Math.random())):25===t.status_code?alert(t.status_message):t})}function b(e){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("movie",t,"&append_to_response=keywords");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("search","movie","&query=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function E(e,t){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return t=t.split("#")[1].replace(" ","%20"),e.next=4,g("search","keyword","&query=".concat(t)).then(function(e){return a=e.results[0].id});case 4:return e.next=6,g("keyword","".concat(a,"/movies"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("movie","".concat(t,"/videos"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark(function e(){var t,a,n,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],a=r.length>1&&void 0!==r[1]?r[1]:"",n=r.length>2&&void 0!==r[2]&&r[2],e.next=5,g("discover","movie","&page=".concat(n,"&vote_average.gte=").concat(t,"&vote_count.gte=100&with_genres=").concat(a));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(){return g("genre","movie/list")}a(24);var M=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-1 mx-auto my-4"},r.a.createElement("input",{type:"text",placeholder:"Search",className:"search",onClick:function(t){t.target.value=e.props.query,e.props.onClickSearch(t)},onChange:function(t){e.props.onChangeEvent(t.target.value)}})))}}]),t}(r.a.Component),C=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;try{var t=this.props.data.results.map(function(t){return r.a.createElement("li",{className:"list-group-item transparency mb-4 boxshadow sl-item",onClick:e.props.onClickEvent(t.id)},r.a.createElement("img",{id:"img-list",className:"img-thumbnail boxshadow float-left mr-4",src:"http://image.tmdb.org/t/p/w200"+t.poster_path,alt:"NO POSTER"}),r.a.createElement("h4",null,t.title),r.a.createElement("p",null,t.overview))});return r.a.createElement("ul",{className:"list-group"},t)}catch(a){return}}}]),t}(r.a.Component),L=a(12),D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).state={showTags:!1,showVideo:!1,showSettings:!1,videoData:null,genres:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"handleClickNext",value:function(){var e=this;return function(){e.props.clickNext(),e.setState({showTags:!1,showSettings:!1,showVideo:!1})}}},{key:"toggleTags",value:function(){var e=this;return function(){e.setState({showTags:!e.state.showTags,showSettings:!1})}}},{key:"toggleSettings",value:function(){var e=this;return function(){e.setState({showSettings:!e.state.showSettings,showTags:!1})}}},{key:"hideVideo",value:function(){this.setState({showVideo:!1})}},{key:"poster",value:function(){return r.a.createElement("div",{className:"col-xs col-lg-6 my-4 d-md-flex justify-content-center"},r.a.createElement("img",{className:"img-thumbnail boxshadow",src:this.props.poster_path,alt:"poster",onClick:this.handleClickNext(),id:"moviePoster"}))}},{key:"movieDetails",value:function(){return r.a.createElement("div",{className:"row",id:"movieDetails"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"my-4 text-xs-center"},this.props.title+" (".concat(this.props.release_date.split("-")[0],")")),r.a.createElement("hr",null),r.a.createElement("div",{className:"details mb-4"},r.a.createElement("span",{id:"votes",className:"mr-3"},r.a.createElement("i",{className:"fas fa-star text-warning"}),this.props.vote_average," ","(".concat(this.props.vote_count,")")),r.a.createElement("span",{id:"genres"},this.props.genres.map(function(e){return e.name}).join(", ")),r.a.createElement("p",{className:"mt-4"},this.props.overview))))}},{key:"moviePrefs",value:function(){var e=this,t=!!this.props.keywords;return r.a.createElement("div",{className:"row",id:"moviePrefs"},r.a.createElement("div",{className:"col"},r.a.createElement("button",null,r.a.createElement("a",{className:"btn",href:"https://www.imdb.com/title/".concat(this.props.imdb_id,"/"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-imdb"}))),r.a.createElement("button",{className:t?"btn":"btn disabled",onClick:this.toggleTags()},r.a.createElement("i",{className:"fas fa-hashtag"})),r.a.createElement("button",{className:"btn",onClick:function(){return e.props.video_data.then(function(t){return e.setState({videoData:t,showVideo:!e.state.showVideo})})}},r.a.createElement("i",{className:"fas fa-film"})),r.a.createElement("button",{className:"btn",onClick:this.toggleSettings()},r.a.createElement("i",{className:"fas fa-cog"}))))}},{key:"renderKeywords",value:function(){var e=this;if(this.props.keywords){var t=this.props.keywords.keywords.map(function(t){var a="#"+t.name;return r.a.createElement("label",{className:"chbox m-1"},r.a.createElement("input",{id:"chbox",type:"checkbox",onChange:function(n){return e.props.clickTag(a,t.id)}}),r.a.createElement("span",{className:"kw p-1"},a))});return r.a.createElement("div",{className:"transparency p-2"},t)}}},{key:"renderVideo",value:function(){return 0!==this.state.videoData.results.length?r.a.createElement(L.a,{className:"embed-responsive yt-border boxshadow",videoId:this.state.videoData.results[0].key,opts:{width:"480",height:"360"}}):r.a.createElement("div",{className:"alert alert-dark",role:"alert"},"Trailer is not available")}},{key:"renderSettings",value:function(){var e=this,t=r.a.createElement("form",{className:"form-settings"},r.a.createElement("input",{onChange:function(t){return e.props.setRange(t.target.value)},type:"range",min:"3",max:"8",value:this.props.voteRange,className:"custom-range w-50",id:"vote-range"}),r.a.createElement("div",null,"Show movies greater than ",r.a.createElement("b",null,this.props.voteRange),r.a.createElement("i",{className:"fas fa-star text-warning ml-1"})));console.log(this.props.genresList);var a=r.a.createElement("div",null,this.state.genres.genres.map(function(t){return r.a.createElement("button",{className:e.props.genresList===t.id?"btn btn-selected":"btn",onClick:function(){return e.props.setGenresList(t.id)}},t.name)}),r.a.createElement("button",{className:"btn",onClick:function(){return e.props.setGenresList("")}},"All"));return r.a.createElement("div",{className:"transparency m-4 p-3",id:"settings"},t,a)}},{key:"getGenres",value:function(){var e=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,_().then(function(e){return e});case 3:return e.t1=e.sent,e.t2={genres:e.t1},e.next=7,e.t0.setState.call(e.t0,e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getGenres()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(this.props.poster_path,")")}}),this.poster(),r.a.createElement("div",{className:"col movie-info transparency boxshadow my-4 "},this.movieDetails(),this.moviePrefs())),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},this.state.showVideo?this.renderVideo():null),r.a.createElement("div",{className:"col-lg-6"},this.state.showSettings?this.renderSettings():null,this.state.showTags?this.renderKeywords():null,this.state.showPrefs?this.renderPrefs():null)))}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e))).state={movieData:void 0,showMovie:!0,showSearchList:!1,searchData:null,searchQuery:"",voteRange:5,pages:0,genresList:""},a.getNextMovie=a.getNextMovie.bind(Object(f.a)(Object(f.a)(a))),a.onClickSearch=a.onClickSearch.bind(Object(f.a)(Object(f.a)(a))),a.performSearch=a.performSearch.bind(Object(f.a)(Object(f.a)(a))),a.selectMovie=a.selectMovie.bind(Object(f.a)(Object(f.a)(a))),a.toggleSearch=a.toggleSearch.bind(Object(f.a)(Object(f.a)(a))),a.setVoteRange=a.setVoteRange.bind(Object(f.a)(Object(f.a)(a))),a.setGenresList=a.setGenresList.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"getNextMovie",value:function(){var e=this;return function(){var t=Object(l.a)(u.a.mark(function t(){var a,n,r,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(a=Math.round(Math.random()*e.state.pages))<=0?1:a,t.next=4,j(e.state.voteRange,e.state.genresList,a).then(function(e){return e});case 4:return n=t.sent,r=(r=Math.round(Math.random()*n.results.length-1))<0?0:r,t.next=9,b(n.results[r].id).then(function(e){return e});case 9:s=t.sent,e.setState({movieData:s,pages:n.total_pages,showMovie:!0,showSearchList:!1});case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},{key:"setVoteRange",value:function(){var e=this;return function(){var t=Object(l.a)(u.a.mark(function t(a){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({voteRange:a,pages:0});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},{key:"setGenresList",value:function(){var e=this;return function(t){return e.setState({genresList:t,pages:0})}}},{key:"getGenres",value:function(){var e=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_().then(function(e){return e}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"selectMovie",value:function(e){var t=this;return Object(l.a)(u.a.mark(function a(){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=t,a.next=3,b(e).then(function(e){return e});case 3:a.t1=a.sent,a.t2=!t.state.showMovie,a.t3=!t.state.showSearchList,a.t4={movieData:a.t1,showMovie:a.t2,showSearchList:a.t3},a.t0.setState.call(a.t0,a.t4);case 8:case"end":return a.stop()}},a,this)}))}},{key:"renderMovieDetails",value:function(){if(!this.state.movieData)return null;if(this.state.showMovie){var e=this.state.movieData,t="http://image.tmdb.org/t/p/w500"+e.poster_path;return r.a.createElement(D,{id:e.id,video_data:N(e.id),poster_path:t,title:e.title,imdb_id:e.imdb_id,release_date:e.release_date,vote_average:e.vote_average,vote_count:e.vote_count,genres:e.genres,overview:e.overview,keywords:e.keywords,clickNext:this.getNextMovie(),clickTag:this.performSearch(),setRange:this.setVoteRange(),setGenresList:this.setGenresList(),genresList:this.state.genresList,voteRange:this.state.voteRange})}return null}},{key:"renderSearch",value:function(){return this.state.showSearchList?r.a.createElement(C,{data:this.state.searchData,onClickEvent:this.selectMovie}):null}},{key:"performSearch",value:function(){var e=this;return function(){var t=Object(l.a)(u.a.mark(function t(a){var n,r,s,i,o=arguments;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],r={showMovie:!1,showSearchList:!0},s={showMovie:!0,showSearchList:!1},i=a?r:s,!/#\w+/gi.test(a)){t.next=14;break}return t.t0=e,t.next=8,E(a,n).then(function(e){return e});case 8:return t.t1=t.sent,t.t2=a,t.t3={searchData:t.t1,showSearchList:!0,showMovie:!1,searchQuery:t.t2},t.abrupt("return",t.t0.setState.call(t.t0,t.t3));case 14:if(!/^#$/.test(a)&&!/^\s$/.test(a)){t.next=18;break}return t.abrupt("return");case 18:return t.t4=e,t.t5=c.a,t.next=22,k(a).then(function(e){return e});case 22:return t.t6=t.sent,t.t7=a,t.t8={searchData:t.t6,searchQuery:t.t7},t.t9=i,t.t10=(0,t.t5)(t.t8,t.t9),t.abrupt("return",t.t4.setState.call(t.t4,t.t10));case 28:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},{key:"onClickSearch",value:function(){var e=this;return function(t){t.target.value&&e.toggleSearch()}}},{key:"toggleSearch",value:function(){return this.setState({showMovie:!this.state.showMovie,showSearchList:!this.state.showSearchList})}},{key:"componentDidMount",value:function(){this.getNextMovie()()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(M,{onClickSearch:this.onClickSearch(),onChangeEvent:this.performSearch(),query:this.state.searchQuery}),this.renderSearch(),this.renderMovieDetails())}}]),t}(r.a.Component);i.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.2a922a3f.chunk.js.map